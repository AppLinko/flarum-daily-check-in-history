(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["admin/app"];var i=t.n(n);const a=flarum.core.compat["common/components/Button"];var r=t.n(a);function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}const o=flarum.core.compat["common/components/Modal"];var c=t.n(o);const l=flarum.core.compat["common/components/Switch"];var d=t.n(l),h=function(t){var e,n;function a(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).range=!1,e.amount="",e.email="",e.username="",e.isDisabled=!1,e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,s(e,n);var o=a.prototype;return o.className=function(){return"Modal--small"},o.title=function(){return i().translator.trans("mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card")},o.oncreate=function(e){t.prototype.oncreate.call(this,e),this.refresh()},o.content=function(){var t=this;return m(".Modal-body",[m(".Form-group",[d().component({state:this.range,onchange:function(e){t.range=e,t.range?t.isDisabled=!0:t.isDisabled=!1},disabled:this.loading},i().translator.trans("mattoid-daily-check-in-history.admin.settings.user-all")),m(".helpText",i().translator.trans("mattoid-daily-check-in-history.admin.settings.range-help"))]),m(".Form-group",[m("label",i().translator.trans("mattoid-daily-check-in-history.admin.settings.username")),m("input.FormControl",{type:"text",value:this.username,onchange:function(e){t.username=e.target.value},min:0,step:.1,disabled:this.loading||this.isDisabled}),m(".helpText",i().translator.trans("mattoid-daily-check-in-history.admin.settings.user-help"))]),m(".Form-group",[m("label",i().translator.trans("mattoid-daily-check-in-history.admin.settings.give-number")),m("input.FormControl",{type:"number",value:this.amount,onchange:function(e){t.amount=e.target.value},min:0,step:.1,disabled:this.loading})]),m(".Form-group",r().component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:parseFloat(this.amount||"0")<=0},i().translator.trans("mattoid-daily-check-in-history.admin.settings.submit-give")))])},o.refresh=function(){},o.request=function(t){return void 0===t&&(t=!1),i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/give/checkin/card",errorHandler:this.onerror.bind(this),body:{userid:this.userid,username:this.username,amount:this.amount,range:this.range,dryRun:t}})},o.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.request().then((function(t){e.hide(),i().alerts.show({type:"success"},i().translator.trans("clarkwinkelmann-money-to-all.lib.modal.success",{count:t.userMatchCount}))})).catch((function(){e.loading=!1,m.redraw()}))},a}(c());i().initializers.add("mattoid-daily-check-in-history",(function(){i().extensionData.for("mattoid-daily-check-in-history").registerSetting((function(){return m(".Form-group",r().component({className:"Button",onclick:function(){i().modal.show(h)}},i().translator.trans("mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card")))})).registerSetting({setting:"mattoid-forum-checkin.max-supplementary-checkin",help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin-requirement"),label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.span-day-checkin",help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.span-day-checkin-requirement"),label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.span-day-checkin"),type:"switch"}).registerSetting({setting:"mattoid-forum-checkin.checkin-range",help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-range-requirement"),label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-range"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.reward-money",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money"),help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.consumption",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.consumption"),help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.checkin-increase",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-increase"),help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-increase-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.checkin-card",help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-card-requirement"),label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-card"),type:"switch"}).registerSetting({setting:"mattoid-forum-checkin.checkin-position",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-position"),help:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-position-requirement"),type:"select",options:{0:"小药店",1:"用户中心（日历）"},default:0}).registerSetting({setting:"mattoid-forum-checkin.min-supplementary-date",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.min-supplementary-date"),default:"#2756c6",type:"date"}).registerSetting({setting:"mattoid-forum-checkin.checkin-color",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-color"),default:"#2756c6",type:"text"}).registerSetting({setting:"mattoid-forum-checkin.supplementary-color",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.supplementary-color"),default:"#ff9900",type:"text"}).registerPermission({icon:"fas fa-id-card",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.allow-supplementary-check-in"),permission:"checkin.allowSupplementaryCheckIn"},"moderate",90).registerPermission({icon:"fas fa-id-card",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.issuance-of-supplementary-cards"),permission:"checkin.issuanceOfSupplementaryCards"},"moderate",90).registerPermission({icon:"fas fa-id-card",label:i().translator.trans("mattoid-daily-check-in-history.admin.settings.query-others-history"),permission:"checkin.queryOthersHistory",allowGuest:!0},"view")}))})(),module.exports=e})();
//# sourceMappingURL=admin.js.map