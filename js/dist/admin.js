(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";const e=flarum.core.compat["admin/app"];var n=t.n(e);const i=flarum.core.compat["common/components/Button"];var a=t.n(i);function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}const s=flarum.core.compat["common/components/Modal"];var o=t.n(s);const c=flarum.core.compat["common/components/Switch"];var l=t.n(c),d=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).range=!1,e.amount="",e.email="",e.username="",e.isDisabled=!1,e}var i,s;s=t,(i=e).prototype=Object.create(s.prototype),i.prototype.constructor=i,r(i,s);var o=e.prototype;return o.className=function(){return"Modal--small"},o.title=function(){return n().translator.trans("mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card")},o.oncreate=function(e){t.prototype.oncreate.call(this,e),this.refresh()},o.content=function(){var t=this;return m(".Modal-body",[m(".Form-group",[l().component({state:this.range,onchange:function(e){t.range=e,t.range?t.isDisabled=!0:t.isDisabled=!1},disabled:this.loading},n().translator.trans("mattoid-daily-check-in-history.admin.settings.user-all")),m(".helpText",n().translator.trans("mattoid-daily-check-in-history.admin.settings.range-help"))]),m(".Form-group",[m("label",n().translator.trans("mattoid-daily-check-in-history.admin.settings.username")),m("input.FormControl",{type:"text",value:this.username,onchange:function(e){t.username=e.target.value},min:0,step:.1,disabled:this.loading||this.isDisabled}),m(".helpText",n().translator.trans("mattoid-daily-check-in-history.admin.settings.user-help"))]),m(".Form-group",[m("label",n().translator.trans("mattoid-daily-check-in-history.admin.settings.give-number")),m("input.FormControl",{type:"number",value:this.amount,onchange:function(e){t.amount=e.target.value},min:0,step:.1,disabled:this.loading})]),m(".Form-group",a().component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:parseFloat(this.amount||"0")<=0},n().translator.trans("mattoid-daily-check-in-history.admin.settings.submit-give")))])},o.refresh=function(){},o.request=function(t){return void 0===t&&(t=!1),n().request({method:"POST",url:n().forum.attribute("apiUrl")+"/give/checkin/card",errorHandler:this.onerror.bind(this),body:{userid:this.userid,username:this.username,amount:this.amount,range:this.range,dryRun:t}})},o.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.request().then((function(t){e.hide(),n().alerts.show({type:"success"},n().translator.trans("clarkwinkelmann-money-to-all.lib.modal.success",{count:t.userMatchCount}))})).catch((function(){e.loading=!1,m.redraw()}))},e}(o());n().initializers.add("mattoid-daily-check-in-history",(function(){n().extensionData.for("mattoid-daily-check-in-history").registerSetting((function(){return m(".Form-group",a().component({className:"Button",onclick:function(){n().modal.show(d)}},n().translator.trans("mattoid-daily-check-in-history.admin.settings.complimentary-supplementary-card")))})).registerSetting({setting:"mattoid-forum-checkin.max-supplementary-checkin",help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin-requirement"),label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.max-supplementary-checkin"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.span-day-checkin",help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.span-day-checkin-requirement"),label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.span-day-checkin"),type:"switch"}).registerSetting({setting:"mattoid-forum-checkin.checkin-range",help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-range-requirement"),label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-range"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.reward-money",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money"),help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.consumption",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.consumption"),help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.reward-money-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.checkin-increase",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-increase"),help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-increase-requirement"),type:"number"}).registerSetting({setting:"mattoid-forum-checkin.checkin-card",help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-card-requirement"),label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-card"),type:"switch"}).registerSetting({setting:"mattoid-forum-checkin.checkin-position",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-position"),help:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-position-requirement"),type:"select",options:{0:"小药店",1:"用户中心（日历）"},default:0}).registerSetting({setting:"mattoid-forum-checkin.min-supplementary-date",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.min-supplementary-date"),default:"#2756c6",type:"date"}).registerSetting({setting:"mattoid-forum-checkin.checkin-color",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.checkin-color"),default:"#2756c6",type:"text"}).registerSetting({setting:"mattoid-forum-checkin.supplementary-color",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.supplementary-color"),default:"#ff9900",type:"text"}).registerPermission({icon:"fas fa-id-card",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.allow-supplementary-check-in"),permission:"checkin.allowSupplementaryCheckIn"},"moderate",90).registerPermission({icon:"fas fa-id-card",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.issuance-of-supplementary-cards"),permission:"checkin.issuanceOfSupplementaryCards"},"moderate",90).registerPermission({icon:"fas fa-id-card",label:n().translator.trans("mattoid-daily-check-in-history.admin.settings.query-others-history"),permission:"checkin.queryOthersHistory",allowGuest:!0},"view")}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map